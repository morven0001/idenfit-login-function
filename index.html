<!DOCTYPE html>
<html>
<body>

<h1>Token Sender</h1>

<script>
// 1. Token alıp ekranda gösteriyoruz
fetch("https://integration.idenfit.com/login?username=zehraauludag@gmail.com&password=Zehra.1992")
  .then(response => response.json())
  .then(data => {
    document.body.innerHTML += `<p>Token: ${data.token}</p>`;
    
    // 2. Token'ı Power Automate'e gönderiyoruz (URL'ni buraya yapıştıracaksın)
    fetch("https://prod-105.westeurope.logic.azure.com:443/workflows/eeba067314d9496993368d8d9df81730/triggers/manual/paths/invoke?api-version=2016-06-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=ddjnu7xuAqnFuweilT_exxHGT4tDNJd4Xkh5Ua-oh5c", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ token: data.token })
    })
    .then(res => res.text())
    .then(result => {
      document.body.innerHTML += `<p>Power Automate Yanıtı: ${result}</p>`;
    });
  })
  .catch(error => {
    document.body.innerHTML += `<p style="color:red">Hata: ${error.message}</p>`;
  });
</script>

</body>
</html>
